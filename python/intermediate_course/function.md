---
tags: Python 中級
lang: ja-jp
robots: noindex, nofollow
breaks: false
---

<style>
.code {
user-select: none;
-ms-user-select: none;
-webkit-user-select: none;
cursor: not-allowed
}
</style>

# 8. 関数の基本
## 導入
関数とは、与えられた値に対して定められた処理を行って結果を返す機能のことです。今まで学んだ、出力の時に使う`print()`や、対象の長さを求める`len()`は全て関数です。長いプログラム書いていくと同じ処理が何度も現れます。この時、関数を使えば一回書くだけで何度でも使えます。

## 解説

### 関数の必要性
例えば、学校の先生がプログラムで生徒の国数英のテストの合計点を計算しようとします。

Aさんの得点は国語45点、数学66点、英語72点

Bさんの得点は国語55点、数学80点、英語61点
```python=1
sum_A = 45 + 66 + 72
sum_B = 55 + 80 + 61
print('Aさんの合計:', sum_A)
print('Bさんの合計:', sum_B)
```
もちろん、このような書き方でも正確に合計を求めることできますが、生徒数が増えると作業量もかなり増えますよね。ここで、上と同じ機能を実現するプログラムを関数で実装してみましょう。
```python=1
def sum_score(name, a, b, c):
　　 total = a + b+ c
    return name, total
print(sum_score('Aさん',45, 66, 72))
print(sum_score('Bさん',55, 80, 61))
```
このように`sum_score`という関数を定義すると、先生は生徒の名前と点数をこのように指定するだけで(`sum_score('Aさん',45, 66, 72)`)それぞれの合計点を求めることができます。

### 関数の定義と用語
```python=1
def sum_score(name, a, b, c):
　　 total = a + b + c
    return name, total
print(sum_score('Aさん',45, 66, 72))
```
これは関数の一番基本的な形です。
```python=1
def 関数名(引数1, 引数2, 引数3, ...):
　　 何らかの処理をする
    return 戻り値
関数を呼び出す
```
:::danger
:fire: **重要**

関数の処理ブロックは必ずインデントをします。
:::
### ローカル変数とグローバル変数
関数の中で利用する変数は、関数の外で使うことができません。関数の中で使う変数は「ローカル変数」と呼ばれ、関数内だけで有効な変数なのです。外部で定義する変数は「グローバル変数」と呼ばれ、プログラムの全体にわたって使用可能です。
```python=1
value = 100
def change():
    value = 20
change()
print("value=",value)
```
|行番号|解説|
|---|---|
|1|関数の外部で変数`value`を定義し、値を100に設定します。|
|2，3|関数`change()`を定義し、内部で変数`value`の値を20に設定します。この`value`は関数内部だけ有効です。|
|4|関数を呼び出します。|
|5|変数`value`を出力します。(出力結果は`value=100`です)|

:::danger
:fire: **重要**

関数の外部で定義された`value`と関数の内部で定義された`value`は、同じ名前でありながら異なる値を指しているのです。
:::

それでは、敢えて関数の外部にある変数と内部にある変数を一致させるにはどうすればいいでしょうか？それが、`global宣言`です。
```python=1
value = 100
def change():
    global value    #valueをグローバル宣言 
    value = 20
change()
print("value=",value)
```
このように、関数内で`value`をグローバル宣言することでグローバル変数として使えるようになり、関数内部でも値を変えることができました。

:::info
:bulb: **補足事項**

Pythonで変数を定義する時、変数はネームスペースという場所に保管され、使う時はそのネームスペースから値を引っ張ってきます。また、変数がコードの中のどこで作られたかによって変数のの有効範囲が違ってきます。その有効範囲を{scope|スコープ}と呼びます。
:::

### 関数の戻り値

```python=1
def cal(a, b):
    return a + b
x = cal(10, 20)
print(x)
```
|行番号|解説|
|---|---|
|1,2|2つの数a,bの和を求める関数を作成します。|
|3|引数をそれぞれ10,20に指定して、関数を呼び出し、結果をxに渡します。|

```python=1
def cal(a, b):
    return a + b, a - b, a * b, a / b
r0 = cal(10, 20)
r1, r2, r3, r4 = cal(10, 20)
print("デフォルトだと一つのタプルで出力：", r0)
print("一つずつアンパックして出力:", r1, r2, r3, r4)
```
|行番号|解説|
|---|---|
|1,2|2つの数の和差積商を計算する関数を作成します。|
|3|引数を指定して、結果を変数`r0`に渡します。この時`r0`はタプル型です。|
|4|タプル型をアンパックして結果を四つの変数に渡すことも可能です。|

:::info
:bulb: **補足事項**

関数の戻り値は必ず必要なものではなく、関数の機能や目的によって、戻り値がなくても大丈夫です。
:::


<div style='display: none'>

## クイズ
1. 以下のプログラムの実行結果を選んでください。
```python=1
def fun(x,y):
    return x + y, (x + y) * 2
print(fun('1','2'))
```
- [x] `('12', '1212')`
- [ ] `(3, 6)`
- [ ] `(12, 1212)`
- [ ] `('3', '6')`

2. 以下のプログラムの実行結果を選んでください。
```python=1
def f(a, b):
    a = 4
    return a + b
def main():
    a = 5
    b = 6
    print(f(a, b), a + b)
main()
```
- [ ] `11 11`
- [ ] `11 10`
- [x] `10 11`
- [ ] `10 10`

3. 関数の戻り値について正しい選択肢を以下から選んでください。
- [ ] `戻り値は必ず必要です。`
- [ ] `戻り値は必ず一つだけです。`
- [x] `戻り値は一つ以上あっても大丈夫です。`
- [x] `戻り値はなくても大丈夫です。`

4. 以下のプログラムの実行結果を選んでください。
```python=1
counter = 1
num = 0
def tset():
    global counter
    for i in (1,2,3):
        counter += 1
        num = 10
tset()
print(counter,num)
```
- [ ] `4 10`
- [ ] `1 0`
- [ ] `1 10`
- [x] `4 0`

5．以下のプログラムについて正しい記述を選んでください。
```python=1
def func(a, b):
    c = a**2 + b
    b = a
    return c
a = 10
b = 100
c = func(a, b) + a
d = func(a, c)
```
- [x] `aは最終的に10になります。`
- [x] `bは最終的に100になります。`
- [ ] `cは最終的に200になります。`
- [ ] `dは最終的に300になります。`

</div>